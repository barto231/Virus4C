{\rtf1\ansi\ansicpg1252\cocoartf2706
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fnil\fcharset0 HelveticaNeue;\f2\fnil\fcharset0 Menlo-Regular;
}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red0\green0\blue0;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0\c87059;\csgray\c0;}
\margl1440\margr1440\vieww23340\viewh14360\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 Virus4C Demo example:\
\
\
Before beginning to use the pipeline you need to make sure you have all required software installed. The required software is:\
\
\
-A unix like shell (Bash)\
-Python\
-Python Libraries\
	-NumPy\
	-PyFaidx\
	-PySam\
-Bowtie2 v2.3+\
-SAMtools v1.3+\
-sdust (can be downloaded from https://github.com/Ih3/sdust)\
-R v3.5+\
-The following R packages available from CRAN:\
	-optparse\
	-caTools\
	-config\
-The following R packages available from Bioconductor:\
	-shortRead\
	-genomicRanges\
	-genomicAlignments\
	-BSgenome\
	-rtracklayer\
-The peakC package available from https://github.com/deWitLab/peakC/\
\
\
The following datasets need to be downloaded and in your work directory:\
\
Datasets:
\f1\fs28 \cf2 \expnd0\expndtw0\kerning0
 
\f0\fs24 \cf0 \kerning1\expnd0\expndtw0 SRR11071610_1 
\f1\fs28 \cf2 \expnd0\expndtw0\kerning0
({\field{\*\fldinst{HYPERLINK "ftp://ftp.sra.ebi.ac.uk/vol1/fastq/SRR110/010/SRR11071610/SRR11071610_1.fastq.gz"}}{\fldrslt SRR11071610_1.fastq.gz}}) 
\f0\fs24 \cf0 \kerning1\expnd0\expndtw0 and SRR11071610_2
\f1\fs28 \cf2 \expnd0\expndtw0\kerning0
 ({\field{\*\fldinst{HYPERLINK "ftp://ftp.sra.ebi.ac.uk/vol1/fastq/SRR110/010/SRR11071610/SRR11071610_2.fastq.gz"}}{\fldrslt SRR11071610_2.fastq.gz}})
\f0\fs24 \cf0 \kerning1\expnd0\expndtw0 \
Human Genome: GRCh38 (https://hgdownload.soe.ucsc.edu/goldenPath/hg38/bigZips/)\
Virus Genome: HVB (https://www.ncbi.nlm.nih.gov/nuccore/U95551.1?report=fasta)\
\
\
1) First you need to download the demo example files and pipeline using \
\
$ wget https://github.com/barto231/Virus4C.git\
$ unzip Virus4C.zip\
\
2) You need to index the human using samtools and bowtie2:\
\
$ bwa index hg38.fa\
\
$ samtools faidx hg38.fa\
\
 Next you need to index virus genome using samtools and bowtie2:\
\
$ bwa index HVB.fa\
\
$ samtools faidx HVB.fa\
\
Then you need to concatenate both the virus genome and human genome and index them:\
\
$ cat hg38.fa HVB.fa > hg38+HVB.fa\
\
$ bwa index hg38+HVB.fa\
\
$ samtools faidx HVB+hg38.fa\
\
3) Certain libraries need to be compiled using:\
\
$ ./build_libs.sh\
\
Then running:\
\
$ cmake -DCMAKE_BUILD_TYPE=Release . && make\
\
4) Change the configuration file as shown in the below example:\
\
\
default:\
 fragFolder: /Users/bart/Desktop/pipe4C/fragFolder/\
 normalizeFactor: 1000000\
 qualityCutoff : 0\
 trimLength : 0\
 minAmountReads : 100\
 readsQuality : 1\
 cores : 1\
 wSize : 21\
 nTop : 2\
 alnStart : TRUE\
 mapUnique : FALSE\
 nonBlind : FALSE\
 wig : FALSE\
 bigwig : FALSE\
 cisplot : FALSE\
 genomePlot : FALSE\
 tsv : FALSE\
 bins : FALSE\
 mismatchMax : 0\
 chr_random : FALSE\
 chr_fix : FALSE\
 chrUn : FALSE\
 chrM : FALSE\
 prefix : chr\
\
 enzymes:\
  -\
    MseI\
    TTAA\
  -\
    Csp6I\
    GTAC\
  -\
    DpnII\
    GATC\
  -\
    EcoRI\
    GAATTC\
  -\
    AluI\
    AGCT\
  -\
    NlaIII\
    CATG\
 genomes:\
  -\
    mm9\
    BSgenome.Mmusculus.UCSC.mm9\
  -\
    mm10\
    BSgenome.Mmusculus.UCSC.mm10\
  -\
    hg19\
    BSgenome.Hsapiens.UCSC.hg19\
  -\
    hg38\
    BSgenome.Hsapiens.UCSC.hg38\
\
\
 bowtie2:\
  -\
    mm9\
    /Users/bart/Desktop/pipe4c/mm9/\
  -\
    mm10\
    /Users/bart/Desktop/pipe4c/mm10/\
  -\
    hg19\
    /Users/bart/Desktop/pipe4c/hg19/\
  -\
    hg38\
    /Users/bart/Desktop/pipe4c/hg38/\
\
\
\
 plot:\
  maxY: 2500\
  plotView: 1000000\
  xaxisUnit: 'Mb'\
  plotType: 'PDF'\
  binSize: 25000\
\
\
5) Change the viewpoint file (VPinfo.txt.) as shown in the below example:\
\
expname	spacer	primer	firstenzyme	secondenzyme	genome	vpchr	vppos	analysis	fastq\
SRR11071622_1	0	AATTCCACAACCTTTCACCAAACTCTGCAAGATCCCAGAGTGAGAGGCCTGTATTTCCCTGCTGGTGGCTCCAGTTCAGGAGCAGTAAACCCTGTTCCGACTACTGCCTCTCCCTTATCGTCAATCTTCTCGAGGATTGGGGACCCTGCGCTGAACATGGAGAACATCACATCAGGATTCCTAGGACCCCTTCTCGTGTTACAGGCGGGGTTTTTCTTGTTGACAAGAATCCTCACAATACCGCAGAGTCTAGACTCGTGGTGGACTTCTCTCAATTTTCTAGGGGGAACTACCGTGTGTCTTGGCCAAAATTCGCAGTCCCCAACCTCCAATCACTCACCAACCTCCTGTCCTCCAACTTGTCCTGGTTATCGCTGGATGTGTCTGCGGCGTTTTATCATCTTCCTCTTCATCCTGCTGCTATGCCTCATCTTCTTGTTGGTTCTTCTGGACTATCAAGGTATGTTGCCCGTTTGTCCTCTAATTCCAGGATCCTCAACCACCAGCACGGGACCATGCCGAACCTGCATGACTACTGCTCAAGGAACCTCTATGTATCCCTCCTGTTGCTGTACCAAACCTTCGGACGGAAATTGCACCTGTATTCCCATCCCATCATCCTGGGCTTTCGGAAAATTCCTATGGGAGTGGGCCTCAGCCCGTTTCTCCTGGCTCAGTTTACTAGTGCCATTTGTTCAGTGGTTCGTAGGGCTTTCCCCCACTGTTTGGCTTTCAGTTATATGGATGATGTGGTATTGGGGGCCAAGTCTGTACAGCATCTTGAGTCCCTTTTTACCGCTGTTACCAATTTTCTTTTGTCTTTGGGTATACATT	EcoRI	MseI	hg38	1	1	all	SRR11071622_1.fastq.gz\
SRR11071622_1_1	0	TTAAAGGGGCCGCAGCCTGACTTCCAGGAGCGGAGCGCGAGTCGGCCTAGCTAATGCGCATGCGTGAGGCGCGAACAGATTCTCGTCACAGTGATTCCCATGGTTGCCTAAGAAACCAGTCCCTGAGGCTTGGCAAAGCAGGAGCCCTACATTGCAGTGCTTGGGTGTCGGGGCCCTGAGGCTCCGGCCTGACCTCTCCAGGGTGTCAACAGGATGGTCTGCGGATGCCAAGAGTGGTGGAGGTCCGACCAGGATGATGAAGCCACAGGCGGAGTCTGGGGGAAGCAGCTCGGCATCCCAGCTTCAGGCCTGCCGGGACGGCGTTCGAGTGAGTCTCCCAGAAAGTCGTGCACCCCCGTGACCTCGAGGACAGGTCTGCCTGTGTGCCCGTGGGCTGCTCTCTCACCCGAGAGTCGTTCTTCTGGAGAGCAGAGCCCCGCAGCCTCAGGGGTTGCCTGGGGGGGTGTGCTTCTGTGCCACTGCTATATGTCTCTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTCTCCCATTCTCTCTTCCATCTCTGTCTCTGTTTCTGTCTCTTTCTTACTTTCTTTGTCTGTGCGCCCGTTTGCGTGTGTGTGTGTTGGGACGAAAATGTCTTGTGCACCGGAGTGCTGTTTCTTTCTTGTAAGCCTGTCTTTGTTGAGCCTCTTTTTGCGTCTTTTACTGGGTCTTGCGGCCCATTGTCAGTTTTCCCTGCCGTTCCACTTTGCATTTTGTGAAAGCCTCGGCAACATGGGGAGCATCGTGGGTCCCGCAGGAGTTGAATTC	EcoRI	MseI	hg38	1	1	all	SRR11071622_1.fastq.gz\
SRR11071640	0	AATTCCACAACCTTTCACCAAACTCTGCAAGATCCCAGAGTGAGAGGCCTGTATTTCCCTGCTGGTGGCTCCAGTTCAGGAGCAGTAAACCCTGTTCCGACTACTGCCTCTCCCTTATCGTCAATCTTCTCGAGGATTGGGGACCCTGCGCTGAACATGGAGAACATCACATCAGGATTCCTAGGACCCCTTCTCGTGTTACAGGCGGGGTTTTTCTTGTTGACAAGAATCCTCACAATACCGCAGAGTCTAGACTCGTGGTGGACTTCTCTCAATTTTCTAGGGGGAACTACCGTGTGTCTTGGCCAAAATTCGCAGTCCCCAACCTCCAATCACTCACCAACCTCCTGTCCTCCAACTTGTCCTGGTTATCGCTGGATGTGTCTGCGGCGTTTTATCATCTTCCTCTTCATCCTGCTGCTATGCCTCATCTTCTTGTTGGTTCTTCTGGACTATCAAGGTATGTTGCCCGTTTGTCCTCTAATTCCAGGATCCTCAACCACCAGCACGGGACCATGCCGAACCTGCATGACTACTGCTCAAGGAACCTCTATGTATCCCTCCTGTTGCTGTACCAAACCTTCGGACGGAAATTGCACCTGTATTCCCATCCCATCATCCTGGGCTTTCGGAAAATTCCTATGGGAGTGGGCCTCAGCCCGTTTCTCCTGGCTCAGTTTACTAGTGCCATTTGTTCAGTGGTTCGTAGGGCTTTCCCCCACTGTTTGGCTTTCAGTTATATGGATGATGTGGTATTGGGGGCCAAGTCTGTACAGCATCTTGAGTCCCTTTTTACCGCTGTTACCAATTTTCTTTTGTCTTTGGGTATACATT	EcoRI	MseI	hg38	1	1	all	SRR11071640.fastq.gz\
SRR11071640_1	0	TTAAAGGGGCCGCAGCCTGACTTCCAGGAGCGGAGCGCGAGTCGGCCTAGCTAATGCGCATGCGTGAGGCGCGAACAGATTCTCGTCACAGTGATTCCCATGGTTGCCTAAGAAACCAGTCCCTGAGGCTTGGCAAAGCAGGAGCCCTACATTGCAGTGCTTGGGTGTCGGGGCCCTGAGGCTCCGGCCTGACCTCTCCAGGGTGTCAACAGGATGGTCTGCGGATGCCAAGAGTGGTGGAGGTCCGACCAGGATGATGAAGCCACAGGCGGAGTCTGGGGGAAGCAGCTCGGCATCCCAGCTTCAGGCCTGCCGGGACGGCGTTCGAGTGAGTCTCCCAGAAAGTCGTGCACCCCCGTGACCTCGAGGACAGGTCTGCCTGTGTGCCCGTGGGCTGCTCTCTCACCCGAGAGTCGTTCTTCTGGAGAGCAGAGCCCCGCAGCCTCAGGGGTTGCCTGGGGGGGTGTGCTTCTGTGCCACTGCTATATGTCTCTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTGTCTCCCATTCTCTCTTCCATCTCTGTCTCTGTTTCTGTCTCTTTCTTACTTTCTTTGTCTGTGCGCCCGTTTGCGTGTGTGTGTGTTGGGACGAAAATGTCTTGTGCACCGGAGTGCTGTTTCTTTCTTGTAAGCCTGTCTTTGTTGAGCCTCTTTTTGCGTCTTTTACTGGGTCTTGCGGCCCATTGTCAGTTTTCCCTGCCGTTCCACTTTGCATTTTGTGAAAGCCTCGGCAACATGGGGAGCATCGTGGGTCCCGCAGGAGTTGAATTC	EcoRI	MseI	hg38	1	1	all	SRR11071640.fastq.gz\
\
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
6) Run the pipeline using:\
$ 
\f2\fs22 \cf3 \CocoaLigature0 python Virus4C.py  --vpFile=/Users/bart/Desktop/pipe4C/example/VPinfo1.txt --fqFolder=/Users/bart/Desktop/pipe4C/example/ --outFolder=/Users/bart/Desktop/pipe4C/out/ --cores 4 --plot --wig
\f0\fs24 \cf0 \CocoaLigature1 \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f2\fs22 \cf3 \CocoaLigature0 \
\
}